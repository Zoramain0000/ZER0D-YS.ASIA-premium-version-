<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üóÇÔ∏è Task Tracker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
background-image: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSFVOZ2CsKQIPT0Lk06f5bNALaBIuEhMWppBg&s');
      color: red;
    }
    header {
background: rgba(0,0,0,0.5);
      color: red;
      padding: 20px;
      text-align: center;
    }
    .container {
      max-width: 1200px;
      margin: 20px auto;
      padding: 10px;
    }
    .task-input, .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 20px;
    }
    input, select, button {
      padding: 10px;
      font-size: 1rem;
      border: 1px solid red;
      border-radius: 5px;
    }
    button {
      background: red;
      color: green;
      cursor: pointer;
      border: none;
    }
    button:hover {
background: rgba(0,0,0,0.5);
    }
    .kanban-board {
      display: flex;
      gap: 20px;
      justify-content: space-between;
      flex-wrap: wrap;
    }
    .column {
      flex: 1;
      min-width: 300px;
background: rgba(0,0,0,0.5);
      border-radius: 10px;
      padding: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .column h3 {
      text-align: center;
      color: red;
    }
    .task {
background: rgba(0,0,0,0.5);
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 5px;
      cursor: grab;
    }
    .task.dragging {
      opacity: 0.5;
    }
    .task-actions {
      margin-top: 5px;
      display: flex;
      justify-content: flex-end;
      gap: 5px;
    }
    .edit { background: yellow; }
    .delete { background: red; color: green; }
    .import-export {
      margin-top: 20px;
      text-align: center;
    }
    @media(max-width: 768px) {
      .kanban-board {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>üóÇÔ∏è Task Tracker</h1>
  </header>

  <div class="container">
    <div class="task-input">
      <input type="text" id="title" placeholder="Task Title" />
      <input type="date" id="date" />
      <select id="priority">
        <option value="Low">Low</option>
        <option value="Medium">Medium</option>
        <option value="High">High</option>
      </select>
      <input type="text" id="tag" placeholder="Tag (optional)">
      <button onclick="addTask()">Add Task</button>
    </div>

    <div class="controls">
      <button onclick="exportTasks()">üì§ Export JSON</button>
      <input type="file" id="importFile" onchange="importTasks(event)">
    </div>

    <div class="kanban-board">
      <div class="column" ondragover="allowDrop(event)" ondrop="drop(event, 'todo')">
        <h3>üìù To Do</h3>
        <div id="todo" class="task-column"></div>
      </div>
      <div class="column" ondragover="allowDrop(event)" ondrop="drop(event, 'inprogress')">
        <h3>üöß In Progress</h3>
        <div id="inprogress" class="task-column"></div>
      </div>
      <div class="column" ondragover="allowDrop(event)" ondrop="drop(event, 'done')">
        <h3>‚úÖ Done</h3>
        <div id="done" class="task-column"></div>
      </div>
    </div>
  </div>

  <script>
    let tasks = JSON.parse(localStorage.getItem('kanbanTasks')) || [];

    function saveTasks() {
      localStorage.setItem('kanbanTasks', JSON.stringify(tasks));
    }

    function addTask() {
      const title = document.getElementById('title').value.trim();
      const date = document.getElementById('date').value;
      const priority = document.getElementById('priority').value;
      const tag = document.getElementById('tag').value.trim();

      if (!title || !date) return alert('Please fill all fields');

      tasks.push({ title, date, priority, tag, status: 'todo' });
      saveTasks();
      renderTasks();

      document.getElementById('title').value = '';
      document.getElementById('date').value = '';
      document.getElementById('tag').value = '';
    }

    function renderTasks() {
      ['todo', 'inprogress', 'done'].forEach(status => {
        const column = document.getElementById(status);
        column.innerHTML = '';

        tasks
          .filter(task => task.status === status)
          .forEach((task, index) => {
            const div = document.createElement('div');
            div.className = 'task';
            div.draggable = true;
            div.ondragstart = e => dragStart(e, index);
            div.innerHTML = `
              <strong>${task.title}</strong><br>
              <small>${task.date} | ${task.priority} | ${task.tag || 'No Tag'}</small>
              <div class="task-actions">
                <button class="edit" onclick="editTask(${index})">Edit</button>
                <button class="delete" onclick="deleteTask(${index})">Delete</button>
              </div>
            `;
            column.appendChild(div);
          });
      });
    }

    function dragStart(e, index) {
      e.dataTransfer.setData('index', index);
    }

    function allowDrop(e) {
      e.preventDefault();
    }

    function drop(e, status) {
      const index = e.dataTransfer.getData('index');
      tasks[index].status = status;
      saveTasks();
      renderTasks();
    }

    function editTask(index) {
      const t = tasks[index];
      const title = prompt("Edit Title:", t.title);
      const date = prompt("Edit Date:", t.date);
      const priority = prompt("Edit Priority:", t.priority);
      const tag = prompt("Edit Tag:", t.tag);
      if (title && date && priority) {
        tasks[index] = { ...tasks[index], title, date, priority, tag };
        saveTasks();
        renderTasks();
      }
    }

    function deleteTask(index) {
      if (confirm("Are you sure you want to delete this task?")) {
        tasks.splice(index, 1);
        saveTasks();
        renderTasks();
      }
    }

    function exportTasks() {
      const data = JSON.stringify(tasks, null, 2);
      const blob = new Blob([data], { type: "application/json" });
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = "tasks.json";
      a.click();
    }

    function importTasks(event) {
      const file = event.target.files[0];
      const reader = new FileReader();
      reader.onload = function(e) {
        try {
          const imported = JSON.parse(e.target.result);
          if (Array.isArray(imported)) {
            tasks = imported;
            saveTasks();
            renderTasks();
            alert("Tasks imported successfully!");
          } else {
            alert("Invalid JSON format");
          }
        } catch {
          alert("Failed to parse JSON");
        }
      };
      reader.readAsText(file);
    }

    renderTasks();
  </script>
</body>
</html>
