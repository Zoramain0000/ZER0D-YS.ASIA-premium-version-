<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ğŸ–¥ï¸ VNC IP Finder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body {
      margin: 0;
background-image: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSFVOZ2CsKQIPT0Lk06f5bNALaBIuEhMWppBg&s');
      color: red;
      font-family: Arial, sans-serif;
    }
    header {
      text-align: center;
      font-size: 1.8em;
background: rgba(0,0,0,0.5);
      padding: 1em;
    }
    .controls {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
background: rgba(0,0,0,0.5);
      padding: 10px;
    }
    button, select {
      background: red;
      color: green;
      border: none;
      padding: 10px;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover, select:hover {
background: rgba(0,0,0,0.5);
    }
    select[multiple] {
      height: 120px;
      width: 200px;
      overflow-y: auto;
    }
    table {
      width: 95%;
      margin: 20px auto;
      border-collapse: collapse;
    }
    th, td {
      border: 1px solid red;
      padding: 8px;
      text-align: center;
    }
    th {
background: rgba(0,0,0,0.5);
    }
    .status-allow { color: #0f0; }
    .status-deny { color: #f00; }
    #map {
      height: 300px;
      margin: 10px auto;
      width: 95%;
      border: 2px solid red;
      border-radius: 5px;
    }
    #chartContainer {
      width: 300px;
      margin: 20px auto;
    }
    footer {
      text-align: center;
      color: red;
      margin: 2em 0;
    }
  </style>
</head>
<body>

<header>ğŸ–¥ï¸ VNC IP Finder</header>

<div class="controls">
  <button onclick="generateIP()">â• Manual Generate</button>
  <button onclick="generate100()">ğŸ’¯ Generate 100 Logs</button>
  <button onclick="startAuto()">â–¶ï¸ Auto Generate</button>
  <button onclick="stopAuto()">â¹ Stop</button>
  <button onclick="clearLogs()">ğŸ§¹ Clear Logs</button>
  <button onclick="exportCSV()">ğŸ“„ Export CSV</button>
  <button onclick="exportPDF()">ğŸ“ Export PDF</button>
  <select id="countryFilter" multiple onchange="onCountryChange()"></select>
</div>

<div id="map"></div>
<div id="chartContainer"><canvas id="vncChart"></canvas></div>

<table id="logTable">
  <thead>
    <tr>
      <th>#</th>
      <th>ğŸŒ Country</th>
      <th>ğŸ§¾ IP Address</th>
      <th>ğŸ”¢ Port</th>
      <th>ğŸ›  VNC Access</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<footer> credit by zora</footer>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
    
const countries = [
  { flag: "ğŸ‡¦ğŸ‡«", name: "Afghanistan", lat: 33.93911, lon: 67.709953 },
  { flag: "ğŸ‡¦ğŸ‡±", name: "Albania", lat: 41.153332, lon: 20.168331 },
  { flag: "ğŸ‡©ğŸ‡¿", name: "Algeria", lat: 28.033886, lon: 1.659626 },
  { flag: "ğŸ‡¦ğŸ‡©", name: "Andorra", lat: 42.546245, lon: 1.601554 },
  { flag: "ğŸ‡¦ğŸ‡´", name: "Angola", lat: -11.202692, lon: 17.873887 },
  { flag: "ğŸ‡¦ğŸ‡¬", name: "Antigua and Barbuda", lat: 17.060816, lon: -61.796428 },
  { flag: "ğŸ‡¦ğŸ‡·", name: "Argentina", lat: -38.416097, lon: -63.616672 },
  { flag: "ğŸ‡¦ğŸ‡²", name: "Armenia", lat: 40.069099, lon: 45.038189 },
  { flag: "ğŸ‡¦ğŸ‡º", name: "Australia", lat: -25.274398, lon: 133.775136 },
  { flag: "ğŸ‡¦ğŸ‡¹", name: "Austria", lat: 47.516231, lon: 14.550072 },
  { flag: "ğŸ‡¦ğŸ‡¿", name: "Azerbaijan", lat: 40.143105, lon: 47.576927 },
  { flag: "ğŸ‡§ğŸ‡¸", name: "Bahamas", lat: 25.03428, lon: -77.39628 },
  { flag: "ğŸ‡§ğŸ‡­", name: "Bahrain", lat: 25.930414, lon: 50.637772 },
  { flag: "ğŸ‡§ğŸ‡©", name: "Bangladesh", lat: 23.684994, lon: 90.356331 },
  { flag: "ğŸ‡§ğŸ‡§", name: "Barbados", lat: 13.193887, lon: -59.543198 },
  { flag: "ğŸ‡§ğŸ‡¾", name: "Belarus", lat: 53.709807, lon: 27.953389 },
  { flag: "ğŸ‡§ğŸ‡ª", name: "Belgium", lat: 50.503887, lon: 4.469936 },
  { flag: "ğŸ‡§ğŸ‡¿", name: "Belize", lat: 17.189877, lon: -88.49765 },
  { flag: "ğŸ‡§ğŸ‡¯", name: "Benin", lat: 9.30769, lon: 2.315834 },
  { flag: "ğŸ‡§ğŸ‡¹", name: "Bhutan", lat: 27.514162, lon: 90.433601 },
  { flag: "ğŸ‡§ğŸ‡´", name: "Bolivia", lat: -16.290154, lon: -63.588653 },
  { flag: "ğŸ‡§ğŸ‡¦", name: "Bosnia and Herzegovina", lat: 43.915886, lon: 17.679076 },
  { flag: "ğŸ‡§ğŸ‡¼", name: "Botswana", lat: -22.328474, lon: 24.684866 },
  { flag: "ğŸ‡§ğŸ‡·", name: "Brazil", lat: -14.235004, lon: -51.92528 },
  { flag: "ğŸ‡§ğŸ‡³", name: "Brunei", lat: 4.535277, lon: 114.727669 },
  { flag: "ğŸ‡§ğŸ‡¬", name: "Bulgaria", lat: 42.733883, lon: 25.48583 },
  { flag: "ğŸ‡§ğŸ‡«", name: "Burkina Faso", lat: 12.238333, lon: -1.561593 },
  { flag: "ğŸ‡§ğŸ‡®", name: "Burundi", lat: -3.373056, lon: 29.918886 },
  { flag: "ğŸ‡¨ğŸ‡»", name: "Cabo Verde", lat: 16.002082, lon: -24.013197 },
  { flag: "ğŸ‡°ğŸ‡­", name: "Cambodia", lat: 12.565679, lon: 104.990963 },
  { flag: "ğŸ‡¨ğŸ‡²", name: "Cameroon", lat: 7.369722, lon: 12.354722 },
  { flag: "ğŸ‡¨ğŸ‡¦", name: "Canada", lat: 56.130366, lon: -106.346771 },
  { flag: "ğŸ‡¨ğŸ‡«", name: "Central African Republic", lat: 6.611111, lon: 20.939444 },
  { flag: "ğŸ‡¹ğŸ‡©", name: "Chad", lat: 17.454435, lon: 18.732207 },
  { flag: "ğŸ‡¨ğŸ‡±", name: "Chile", lat: -35.675147, lon: -71.542969 },
  { flag: "ğŸ‡¨ğŸ‡³", name: "China", lat: 35.86166, lon: 104.195397 },
  { flag: "ğŸ‡¨ğŸ‡´", name: "Colombia", lat: 4.570868, lon: -74.297333 },
  { flag: "ğŸ‡°ğŸ‡²", name: "Comoros", lat: -11.875001, lon: 43.872219 },
  { flag: "ğŸ‡¨ğŸ‡¬", name: "Congo", lat: -0.228021, lon: 15.827659 },
  { flag: "ğŸ‡¨ğŸ‡·", name: "Costa Rica", lat: 9.748917, lon: -83.753428 },
  { flag: "ğŸ‡­ğŸ‡·", name: "Croatia", lat: 45.1, lon: 15.2 },
  { flag: "ğŸ‡¨ğŸ‡º", name: "Cuba", lat: 21.521757, lon: -77.781167 },
  { flag: "ğŸ‡¨ğŸ‡¾", name: "Cyprus", lat: 35.126413, lon: 33.429859 },
  { flag: "ğŸ‡¨ğŸ‡¿", name: "Czech Republic", lat: 49.817492, lon: 15.472962 },
  { flag: "ğŸ‡¨ğŸ‡©", name: "Democratic Republic of the Congo", lat: -4.038333, lon: 21.758664 },
  { flag: "ğŸ‡©ğŸ‡°", name: "Denmark", lat: 56.26392, lon: 9.501785 },
  { flag: "ğŸ‡©ğŸ‡¯", name: "Djibouti", lat: 11.825138, lon: 42.590275 },
  { flag: "ğŸ‡©ğŸ‡²", name: "Dominica", lat: 15.414999, lon: -61.370976 },
  { flag: "ğŸ‡©ğŸ‡´", name: "Dominican Republic", lat: 18.735693, lon: -70.162651 },
  { flag: "ğŸ‡ªğŸ‡¨", name: "Ecuador", lat: -1.831239, lon: -78.183406 },
  { flag: "ğŸ‡ªğŸ‡¬", name: "Egypt", lat: 26.820553, lon: 30.802498 },
  { flag: "ğŸ‡¸ğŸ‡»", name: "El Salvador", lat: 13.794216, lon: -88.89653 },
  { flag: "ğŸ‡¬ğŸ‡¶", name: "Equatorial Guinea", lat: 1.650801, lon: 10.267895 },
  { flag: "ğŸ‡ªğŸ‡·", name: "Eritrea", lat: 15.179384, lon: 39.782334 },
  { flag: "ğŸ‡ªğŸ‡ª", name: "Estonia", lat: 58.595272, lon: 25.013607 },
  { flag: "ğŸ‡¸ğŸ‡¿", name: "Eswatini", lat: -26.5225, lon: 31.4659 },
  { flag: "ğŸ‡ªğŸ‡¹", name: "Ethiopia", lat: 9.145, lon: 40.489673 },
  { flag: "ğŸ‡«ğŸ‡¯", name: "Fiji", lat: -16.578193, lon: 179.414413 },
  { flag: "ğŸ‡«ğŸ‡®", name: "Finland", lat: 61.92411, lon: 25.748151 },
  { flag: "ğŸ‡«ğŸ‡·", name: "France", lat: 46.227638, lon: 2.213749 },
  { flag: "ğŸ‡¬ğŸ‡¦", name: "Gabon", lat: -0.803689, lon: 11.609444 },
  { flag: "ğŸ‡¬ğŸ‡²", name: "Gambia", lat: 13.443182, lon: -15.310139 },
  { flag: "ğŸ‡¬ğŸ‡ª", name: "Georgia", lat: 42.315407, lon: 43.356892 },
  { flag: "ğŸ‡©ğŸ‡ª", name: "Germany", lat: 51.165691, lon: 10.451526 },
  { flag: "ğŸ‡¬ğŸ‡­", name: "Ghana", lat: 7.946527, lon: -1.023194 },
  { flag: "ğŸ‡¬ğŸ‡·", name: "Greece", lat: 39.074208, lon: 21.824312 },
  { flag: "ğŸ‡¬ğŸ‡©", name: "Grenada", lat: 12.262776, lon: -61.604171 },
  { flag: "ğŸ‡¬ğŸ‡¹", name: "Guatemala", lat: 15.783471, lon: -90.230759 },
  { flag: "ğŸ‡¬ğŸ‡³", name: "Guinea", lat: 9.945587, lon: -9.696645 },
  { flag: "ğŸ‡¬ğŸ‡¼", name: "Guinea-Bissau", lat: 11.803749, lon: -15.180413 },
  { flag: "ğŸ‡¬ğŸ‡¾", name: "Guyana", lat: 4.860416, lon: -58.93018 },
  { flag: "ğŸ‡­ğŸ‡¹", name: "Haiti", lat: 18.971187, lon: -72.285215 },
  { flag: "ğŸ‡­ğŸ‡³", name: "Honduras", lat: 15.199999, lon: -86.241905 },
  { flag: "ğŸ‡­ğŸ‡º", name: "Hungary", lat: 47.162494, lon: 19.503304 },
  { flag: "ğŸ‡®ğŸ‡¸", name: "Iceland", lat: 64.963051, lon: -19.020835 },
  { flag: "ğŸ‡®ğŸ‡³", name: "India", lat: 20.593684, lon: 78.96288 },
  { flag: "ğŸ‡®ğŸ‡©", name: "Indonesia", lat: -0.789275, lon: 113.921327 },
  { flag: "ğŸ‡®ğŸ‡·", name: "Iran", lat: 32.427908, lon: 53.688046 },
  { flag: "ğŸ‡®ğŸ‡¶", name: "Iraq", lat: 33.223191, lon: 43.679291 },
  { flag: "ğŸ‡®ğŸ‡ª", name: "Ireland", lat: 53.41291, lon: -8.24389 },
  { flag: "ğŸ‡®ğŸ‡±", name: "Israel", lat: 31.046051, lon: 34.851612 },
  { flag: "ğŸ‡®ğŸ‡¹", name: "Italy", lat: 41.87194, lon: 12.56738 },
  { flag: "ğŸ‡¯ğŸ‡²", name: "Jamaica", lat: 18.109581, lon: -77.297508 },
  { flag: "ğŸ‡¯ğŸ‡µ", name: "Japan", lat: 36.204824, lon: 138.252924 },
  { flag: "ğŸ‡¯ğŸ‡´", name: "Jordan", lat: 30.585164, lon: 36.238414 },
  { flag: "ğŸ‡°ğŸ‡¿", name: "Kazakhstan", lat: 48.019573, lon: 66.923684 },
  { flag: "ğŸ‡°ğŸ‡ª", name: "Kenya", lat: -0.023559, lon: 37.906193 },
  { flag: "ğŸ‡°ğŸ‡®", name: "Kiribati", lat: -3.370417, lon: -168.734039 },
  { flag: "ğŸ‡°ğŸ‡µ", name: "North Korea", lat: 40.339852, lon: 127.510093 },
  { flag: "ğŸ‡°ğŸ‡·", name: "South Korea", lat: 35.907757, lon: 127.766922 },
  { flag: "ğŸ‡°ğŸ‡¼", name: "Kuwait", lat: 29.31166, lon: 47.481766 },
  { flag: "ğŸ‡°ğŸ‡¬", name: "Kyrgyzstan", lat: 41.20438, lon: 74.766098 },
  { flag: "ğŸ‡±ğŸ‡¦", name: "Laos", lat: 19.85627, lon: 102.495496 },
  { flag: "ğŸ‡±ğŸ‡»", name: "Latvia", lat: 56.879635, lon: 24.603189 },
  { flag: "ğŸ‡±ğŸ‡§", name: "Lebanon", lat: 33.854721, lon: 35.862285 },
  { flag: "ğŸ‡±ğŸ‡¸", name: "Lesotho", lat: -29.609988, lon: 28.233608 },
  { flag: "ğŸ‡±ğŸ‡·", name: "Liberia", lat: 6.428055, lon: -9.429499 },
  { flag: "ğŸ‡±ğŸ‡¾", name: "Libya", lat: 26.3351, lon: 17.228331 },
  { flag: "ğŸ‡±ğŸ‡®", name: "Liechtenstein", lat: 47.166, lon: 9.555373 },
  { flag: "ğŸ‡±ğŸ‡¹", name: "Lithuania", lat: 55.169438, lon: 23.881275 },
  { flag: "ğŸ‡±ğŸ‡º", name: "Luxembourg", lat: 49.815273, lon: 6.129583 },
  { flag: "ğŸ‡²ğŸ‡¬", name: "Madagascar", lat: -18.766947, lon: 46.869107 },
  { flag: "ğŸ‡²ğŸ‡¼", name: "Malawi", lat: -13.254308, lon: 34.301525 },
  { flag: "ğŸ‡²ğŸ‡¾", name: "Malaysia", lat: 4.210484, lon: 101.975766 },
  { flag: "ğŸ‡²ğŸ‡»", name: "Maldives", lat: 3.202778, lon: 73.22068 },
  { flag: "ğŸ‡²ğŸ‡±", name: "Mali", lat: 17.570692, lon: -3.996166 },
  { flag: "ğŸ‡²ğŸ‡¹", name: "Malta", lat: 35.937496, lon: 14.375416 },
  { flag: "ğŸ‡²ğŸ‡­", name: "Marshall Islands", lat: 7.131474, lon: 171.184478 },
  { flag: "ğŸ‡²ğŸ‡·", name: "Mauritania", lat: 21.00789, lon: -10.940835 },
  { flag: "ğŸ‡²ğŸ‡º", name: "Mauritius", lat: -20.348404, lon: 57.552152 },
  { flag: "ğŸ‡²ğŸ‡½", name: "Mexico", lat: 23.634501, lon: -102.552784 },
  { flag: "ğŸ‡«ğŸ‡²", name: "Micronesia", lat: 7.425554, lon: 150.550812 },
  { flag: "ğŸ‡²ğŸ‡©", name: "Moldova", lat: 47.411631, lon: 28.369885 },
  { flag: "ğŸ‡²ğŸ‡¨", name: "Monaco", lat: 43.750298, lon: 7.412841 },
  { flag: "ğŸ‡²ğŸ‡³", name: "Mongolia", lat: 46.862496, lon: 103.846656 },
  { flag: "ğŸ‡²ğŸ‡ª", name: "Montenegro", lat: 42.708678, lon: 19.37439 },
  { flag: "ğŸ‡²ğŸ‡¦", name: "Morocco", lat: 31.791702, lon: -7.09262 },
  { flag: "ğŸ‡²ğŸ‡¿", name: "Mozambique", lat: -18.665695, lon: 35.529562 },
  { flag: "ğŸ‡²ğŸ‡²", name: "Myanmar", lat: 21.913965, lon: 95.956223 },
  { flag: "ğŸ‡³ğŸ‡¦", name: "Namibia", lat: -22.95764, lon: 18.49041 },
  { flag: "ğŸ‡³ğŸ‡·", name: "Nauru", lat: -0.522778, lon: 166.931503 },
  { flag: "ğŸ‡³ğŸ‡µ", name: "Nepal", lat: 28.394857, lon: 84.124008 },
  { flag: "ğŸ‡³ğŸ‡±", name: "Netherlands", lat: 52.132633, lon: 5.291266 },
  { flag: "ğŸ‡³ğŸ‡¿", name: "New Zealand", lat: -40.900557, lon: 174.885971 },
  { flag: "ğŸ‡³ğŸ‡®", name: "Nicaragua", lat: 12.865416, lon: -85.207229 },
  { flag: "ğŸ‡³ğŸ‡ª", name: "Niger", lat: 17.607789, lon: 8.081666 },
  { flag: "ğŸ‡³ğŸ‡¬", name: "Nigeria", lat: 9.081999, lon: 8.675277 },
  { flag: "ğŸ‡²ğŸ‡°", name: "North Macedonia", lat: 41.608635, lon: 21.745275 },
  { flag: "ğŸ‡³ğŸ‡´", name: "Norway", lat: 60.472024, lon: 8.468946 },
  { flag: "ğŸ‡´ğŸ‡²", name: "Oman", lat: 21.512583, lon: 55.923255 },
  { flag: "ğŸ‡µğŸ‡°", name: "Pakistan", lat: 30.375321, lon: 69.345116 },
  { flag: "ğŸ‡µğŸ‡¼", name: "Palau", lat: 7.51498, lon: 134.58252 },
  { flag: "ğŸ‡µğŸ‡¸", name: "Palestine", lat: 31.9474, lon: 35.2332 },
  { flag: "ğŸ‡µğŸ‡¦", name: "Panama", lat: 8.537981, lon: -80.782127 },
  { flag: "ğŸ‡µğŸ‡¬", name: "Papua New Guinea", lat: -6.314993, lon: 143.95555 },
  { flag: "ğŸ‡µğŸ‡¾", name: "Paraguay", lat: -23.442503, lon: -58.443832 },
  { flag: "ğŸ‡µğŸ‡ª", name: "Peru", lat: -9.189967, lon: -75.015152 },
  { flag: "ğŸ‡µğŸ‡­", name: "Philippines", lat: 12.879721, lon: 121.774017 },
  { flag: "ğŸ‡µğŸ‡±", name: "Poland", lat: 51.919438, lon: 19.145136 },
  { flag: "ğŸ‡µğŸ‡¹", name: "Portugal", lat: 39.399872, lon: -8.224454 },
  { flag: "ğŸ‡¶ğŸ‡¦", name: "Qatar", lat: 25.354826, lon: 51.183884 },
  { flag: "ğŸ‡·ğŸ‡´", name: "Romania", lat: 45.943161, lon: 24.96676 },
  { flag: "ğŸ‡·ğŸ‡º", name: "Russia", lat: 61.52401, lon: 105.318756 },
  { flag: "ğŸ‡·ğŸ‡¼", name: "Rwanda", lat: -1.940278, lon: 29.873888 },
  { flag: "ğŸ‡°ğŸ‡³", name: "Saint Kitts and Nevis", lat: 17.357822, lon: -62.782998 },
  { flag: "ğŸ‡±ğŸ‡¨", name: "Saint Lucia", lat: 13.909444, lon: -60.978893 },
  { flag: "ğŸ‡»ğŸ‡¨", name: "Saint Vincent and the Grenadines", lat: 12.984305, lon: -61.287228 },
  { flag: "ğŸ‡¼ğŸ‡¸", name: "Samoa", lat: -13.759029, lon: -172.104629 },
  { flag: "ğŸ‡¸ğŸ‡²", name: "San Marino", lat: 43.945438, lon: 12.454529 },
  { flag: "ğŸ‡¸ğŸ‡¹", name: "Sao Tome and Principe", lat: 0.18636, lon: 6.613081 },
  { flag: "ğŸ‡¸ğŸ‡¦", name: "Saudi Arabia", lat: 23.885942, lon: 45.079162 },
  { flag: "ğŸ‡¸ğŸ‡³", name: "Senegal", lat: 14.497401, lon: -14.452362 },
  { flag: "ğŸ‡·ğŸ‡¸", name: "Serbia", lat: 44.016521, lon: 21.005859 },
  { flag: "ğŸ‡¸ğŸ‡¨", name: "Seychelles", lat: -4.679574, lon: 55.491977 },
  { flag: "ğŸ‡¸ğŸ‡±", name: "Sierra Leone", lat: 8.460555, lon: -11.779889 },
  { flag: "ğŸ‡¸ğŸ‡¬", name: "Singapore", lat: 1.352083, lon: 103.819836 },
  { flag: "ğŸ‡¸ğŸ‡°", name: "Slovakia", lat: 48.669026, lon: 19.699024 },
  { flag: "ğŸ‡¸ğŸ‡®", name: "Slovenia", lat: 46.151241, lon: 14.995463 },
  { flag: "ğŸ‡¸ğŸ‡§", name: "Solomon Islands", lat: -9.64571, lon: 160.156194 },
  { flag: "ğŸ‡¸ğŸ‡´", name: "Somalia", lat: 5.152149, lon: 46.199616 },
  { flag: "ğŸ‡¸ğŸ‡©", name: "Sudan", lat: 12.862807, lon: 30.217636 },
  { flag: "ğŸ‡¸ğŸ‡¸", name: "South Sudan", lat: 6.876991, lon: 31.306979 },
  { flag: "ğŸ‡ªğŸ‡¸", name: "Spain", lat: 40.463667, lon: -3.74922 },
  { flag: "ğŸ‡±ğŸ‡°", name: "Sri Lanka", lat: 7.873054, lon: 80.771797 },
  { flag: "ğŸ‡¸ğŸ‡©", name: "Sudan", lat: 12.862807, lon: 30.217636 },
  { flag: "ğŸ‡¸ğŸ‡·", name: "Suriname", lat: 3.919305, lon: -56.027783 },
  { flag: "ğŸ‡¸ğŸ‡ª", name: "Sweden", lat: 60.128161, lon: 18.643501 },
  { flag: "ğŸ‡¨ğŸ‡­", name: "Switzerland", lat: 46.818188, lon: 8.227511 },
  { flag: "ğŸ‡¸ğŸ‡¾", name: "Syria", lat: 34.802075, lon: 38.996815 },
  { flag: "ğŸ‡¹ğŸ‡¼", name: "Taiwan", lat: 23.69781, lon: 120.960515 },
  { flag: "ğŸ‡¹ğŸ‡¯", name: "Tajikistan", lat: 38.861034, lon: 71.276093 },
  { flag: "ğŸ‡¹ğŸ‡¿", name: "Tanzania", lat: -6.369028, lon: 34.888822 },
  { flag: "ğŸ‡¹ğŸ‡­", name: "Thailand", lat: 15.870032, lon: 100.992541 },
  { flag: "ğŸ‡¹ğŸ‡±", name: "Timor-Leste", lat: -8.874217, lon: 125.727539 },
  { flag: "ğŸ‡¹ğŸ‡¬", name: "Togo", lat: 8.619543, lon: 0.824782 },
  { flag: "ğŸ‡¹ğŸ‡´", name: "Tonga", lat: -21.178986, lon: -175.198242 },
  { flag: "ğŸ‡¹ğŸ‡¹", name: "Trinidad and Tobago", lat: 10.691804, lon: -61.222503 },
  { flag: "ğŸ‡¹ğŸ‡³", name: "Tunisia", lat: 33.886917, lon: 9.537499 },
  { flag: "ğŸ‡¹ğŸ‡·", name: "Turkey", lat: 38.963745, lon: 35.243322 },
  { flag: "ğŸ‡¹ğŸ‡²", name: "Turkmenistan", lat: 38.969719, lon: 59.556278 },
  { flag: "ğŸ‡¹ğŸ‡»", name: "Tuvalu", lat: -7.109535, lon: 177.64933 },
  { flag: "ğŸ‡ºğŸ‡¬", name: "Uganda", lat: 1.373333, lon: 32.290275 },
  { flag: "ğŸ‡ºğŸ‡¦", name: "Ukraine", lat: 48.379433, lon: 31.16558 },
  { flag: "ğŸ‡¦ğŸ‡ª", name: "United Arab Emirates", lat: 23.424076, lon: 53.847818 },
  { flag: "ğŸ‡¬ğŸ‡§", name: "United Kingdom", lat: 55.378051, lon: -3.435973 },
  { flag: "ğŸ‡ºğŸ‡¸", name: "United States", lat: 37.09024, lon: -95.712891 },
  { flag: "ğŸ‡ºğŸ‡¾", name: "Uruguay", lat: -32.522779, lon: -55.765835 },
  { flag: "ğŸ‡ºğŸ‡¿", name: "Uzbekistan", lat: 41.377491, lon: 64.585262 },
  { flag: "ğŸ‡»ğŸ‡º", name: "Vanuatu", lat: -15.376706, lon: 166.959158 },
  { flag: "ğŸ‡»ğŸ‡¦", name: "Vatican City", lat: 41.902916, lon: 12.453389 },
  { flag: "ğŸ‡»ğŸ‡ª", name: "Venezuela", lat: 6.42375, lon: -66.58973 },
  { flag: "ğŸ‡»ğŸ‡³", name: "Vietnam", lat: 14.058324, lon: 108.277199 },
  { flag: "ğŸ‡¾ğŸ‡ª", name: "Yemen", lat: 15.552727, lon: 48.516388 },
  { flag: "ğŸ‡¿ğŸ‡²", name: "Zambia", lat: -13.133897, lon: 27.849332 },
  { flag: "ğŸ‡¿ğŸ‡¼", name: "Zimbabwe", lat: -19.015438, lon: 29.154857 }
];
    
  let logCount = 0, interval = null;
  const allowedStats = { allowed: 0, blocked: 0 };
  const map = L.map('map').setView([20, 0], 2);
  const markers = [];

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  const ctx = document.getElementById('vncChart').getContext('2d');
  const chart = new Chart(ctx, {
    type: 'doughnut',
    data: {
      labels: ['âœ… Allowed', 'âŒ Blocked'],
      datasets: [{
        data: [0, 0],
        backgroundColor: ['#0f0', '#f00'],
      }]
    }
  });

  function updateChart() {
    chart.data.datasets[0].data = [allowedStats.allowed, allowedStats.blocked];
    chart.update();
  }

  function generateRealIP() {
    const a = Math.floor(Math.random() * 223) + 1;
    const b = Math.floor(Math.random() * 255);
    const c = Math.floor(Math.random() * 255);
    const d = Math.floor(Math.random() * 255);
    return `${a}.${b}.${c}.${d}`;
  }

  function getRandomPort() {
    return Math.floor(Math.random() * 65535) + 1;
  }

  function getSelectedCountries() {
    return Array.from(document.getElementById('countryFilter').selectedOptions).map(o => o.value);
  }

  function pickCountry() {
    const selected = getSelectedCountries();
    if (selected.length === 0) return countries[Math.floor(Math.random() * countries.length)];
    const match = countries.find(c => c.name === selected[Math.floor(Math.random() * selected.length)]);
    return match || countries[0];
  }

  function addLog(ip = generateRealIP()) {
    const country = pickCountry();
    const port = getRandomPort();
    const allowed = (port >= 5900 && port <= 5999);
    const tbody = document.querySelector("#logTable tbody");

    const row = document.createElement("tr");
    row.setAttribute('data-country', country.name);
    row.innerHTML = `
      <td>${++logCount}</td>
      <td>${country.flag} ${country.name}</td>
      <td>${ip}</td>
      <td>${port}</td>
      <td class="${allowed ? 'status-allow' : 'status-deny'}">
        ${allowed ? 'âœ… Allowed (VNC)' : 'âŒ Blocked'}
      </td>
    `;
    tbody.prepend(row);

    if (allowed) allowedStats.allowed++; else allowedStats.blocked++;
    updateChart();

    const latOffset = (Math.random() - 0.5) * 5;
    const lonOffset = (Math.random() - 0.5) * 5;
    const marker = L.marker([country.lat + latOffset, country.lon + lonOffset])
      .addTo(map)
      .bindPopup(`<b>${ip}:${port}</b><br>${country.name}<br>${allowed ? 'âœ… Allowed' : 'âŒ Blocked'}`);
    markers.push(marker);
  }

  function generateIP() { addLog(); }
  function generate100() { for (let i = 0; i < 100; i++) addLog(); }
  function startAuto() {
    if (interval) return;
    interval = setInterval(generateIP, 1000);
  }
  function stopAuto() {
    clearInterval(interval);
    interval = null;
  }

  function clearLogs() {
    document.querySelector("#logTable tbody").innerHTML = "";
    logCount = allowedStats.allowed = allowedStats.blocked = 0;
    updateChart();
    markers.forEach(m => map.removeLayer(m));
  }

  function exportCSV() {
    let csv = "No,Country,IP,Port,VNC Access\n";
    document.querySelectorAll("#logTable tbody tr").forEach(row => {
      const cols = row.querySelectorAll("td");
      const line = Array.from(cols).map(col => col.innerText).join(",");
      csv += line + "\n";
    });
    const blob = new Blob([csv], { type: 'text/csv' });
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = "vnc_ip_logs.csv";
    a.click();
  }

  async function exportPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    doc.setFontSize(12);
    doc.text("VNC IP Log Report", 14, 15);
    let y = 25;
    doc.setFont("courier", "normal");
    doc.text("No | Country       | IP Address      | Port | VNC Access", 14, y);
    y += 6;
    document.querySelectorAll("#logTable tbody tr").forEach((row, idx) => {
      const cols = row.querySelectorAll("td");
      const line = Array.from(cols).map(col => col.innerText).join(" | ");
      doc.text(line, 14, y);
      y += 6;
      if (y > 280) {
        doc.addPage(); y = 20;
      }
    });
    doc.save("vnc_ip_logs.pdf");
  }

  function updateCountryFilter() {
    const select = document.getElementById('countryFilter');
    countries.forEach(country => {
      const opt = document.createElement("option");
      opt.value = country.name;
      opt.textContent = `${country.flag} ${country.name}`;
      select.appendChild(opt);
    });
  }

  function onCountryChange() {
    generateIP(); // Auto generate a log from selected country when changed
  }

  updateCountryFilter(); // Populate the dropdown at load
</script>
</body>
</html>
