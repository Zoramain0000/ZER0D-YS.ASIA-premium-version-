<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>zerodays.site - Server Hosting & Domain Info Tool</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto&display=swap');
    body {
      margin: 0;
      font-family: 'Roboto', sans-serif;
background-image: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSFVOZ2CsKQIPT0Lk06f5bNALaBIuEhMWppBg&s');
      color: red;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    header {
background: rgba(0, 0, 0, 0.5)
      padding: 1.5rem;
      text-align: center;
      font-size: 2rem;
      font-weight: 700;
      border-bottom: 4px solid red;
      user-select: none;
    }
    main {
      flex: 1;
      max-width: 1000px;
      margin: 1rem auto;
      padding: 0 1rem 3rem 1rem;
    }
    form {
      display: flex;
      gap: 0.7rem;
      flex-wrap: wrap;
      justify-content: center;
    }
    input[type=text] {
      flex-grow: 1;
      padding: 0.8rem 1rem;
      font-size: 1.1rem;
      border-radius: 6px;
      border: none;
background: rgba(0, 0, 0, 0.5);
      color: red;
    }
    input::placeholder {
      color: red;
    }
    button {
      background: red;
      color: green;
      border: none;
      padding: 0.8rem 1.6rem;
      border-radius: 6px;
      font-weight: 700;
      font-size: 1.1rem;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    button:hover {
background: rgba(0, 0, 0, 0.5);
    }
    #output {
      margin-top: 1.5rem;
background: rgba(0, 0, 0, 0.5);
      border-radius: 10px;
      padding: 1rem 1.5rem;
      box-shadow: 0 0 10px red;
      
    }
    h2 {
      border-bottom: 2px solid red;
      padding-bottom: 0.2rem;
      margin-top: 1.3rem;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 0.7rem;
    }
    th, td {
      text-align: left;
      padding: 0.35rem 0.5rem;
      border-bottom: 1px solid red;
    }
    th {
      color: red;
      font-weight: 700;
    }
    .loading {
      font-style: italic;
      color: red;
      margin-top: 1rem;
      text-align: center;
    }
    .error {
      color: red;
      font-weight: 700;
      margin-top: 1rem;
      text-align: center;
    }
    footer {
      text-align: center;
      padding: 1rem;
      font-size: 0.85rem;
      color: red;
    }
    .export-buttons {
      margin-top: 1.2rem;
      text-align: center;
    }
    .export-buttons button {
      margin: 0 0.5rem;
    }
  </style>
</head>
<body>
  <header>zerodays.site - Server Hosting & Domain Info Tool</header>
  <main>
    <form id="domainForm" autocomplete="off">
      <input type="text" id="domainInput" placeholder="Enter domain or IP (e.g. example.com or 8.8.8.8)" required />
      <button type="submit">Lookup</button>
    </form>

    <div class="export-buttons" style="display:none" id="exportButtons">
      <button onclick="exportToCSV()">Export CSV</button>
      <button onclick="exportToPDF()">Export PDF</button>
    </div>

    <div id="output">Enter a domain or IP and press Lookup to get started.</div>
  </main>
  <footer>© 2025 zerodays.site test</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
  const form = document.getElementById('domainForm');
  const input = document.getElementById('domainInput');
  const output = document.getElementById('output');
  const exportButtons = document.getElementById('exportButtons');
  let lastHTML = '';

  async function fetchWithTimeout(resource, options = {}) {
    const { timeout = 8000 } = options;
    const controller = new AbortController();
    const id = setTimeout(() => controller.abort(), timeout);
    try {
      const response = await fetch(resource, { ...options, signal: controller.signal });
      clearTimeout(id);
      return response;
    } catch (err) {
      clearTimeout(id);
      throw err;
    }
  }

  async function fetchRDAP(domainOrIP) {
    try {
      const url = `https://rdap.org/domain/${domainOrIP}`;
      const res = await fetchWithTimeout(url);
      if (!res.ok) throw new Error();
      return await res.json();
    } catch {
      try {
        const url = `https://rdap.org/ip/${domainOrIP}`;
        const res = await fetchWithTimeout(url);
        if (!res.ok) throw new Error();
        return await res.json();
      } catch {
        return { error: 'RDAP lookup failed' };
      }
    }
  }

  async function fetchDNSRecords(domain) {
    const types = ['A', 'AAAA', 'MX', 'NS', 'TXT', 'CNAME', 'SOA', 'PTR'];
    const results = {};
    for (const type of types) {
      try {
        const url = `https://cloudflare-dns.com/dns-query?name=${domain}&type=${type}`;
        const res = await fetchWithTimeout(url, {
          headers: { Accept: 'application/dns-json' }
        });
        const data = await res.json();
        results[type] = (data.Answer || []).map(r => r.data);
      } catch {
        results[type] = [];
      }
    }
    return results;
  }

  async function fetchIPInfo(ip) {
    try {
      const url = `https://ip-api.com/json/${ip}?fields=status,message,country,regionName,city,zip,lat,lon,isp,org,as,query`;
      const res = await fetchWithTimeout(url);
      const data = await res.json();
      if (data.status !== 'success') throw new Error();
      return data;
    } catch {
      return { error: 'IP lookup failed' };
    }
  }

  function renderSection(title, content) {
    return `<h2>${title}</h2>${content}`;
  }

  function renderTable(obj) {
    let rows = '';
    for (const key in obj) {
      const val = Array.isArray(obj[key]) ? obj[key].join(', ') || 'N/A' : obj[key] || 'N/A';
      rows += `<tr><th>${key}</th><td>${val}</td></tr>`;
    }
    return `<table>${rows}</table>`;
  }

  function renderRDAP(data) {
    if (data.error) return `<p class="error">${data.error}</p>`;
    let out = `<p><strong>Name:</strong> ${data.ldhName || data.name || data.handle || 'N/A'}</p>`;
    let registrar = 'N/A';
    if (data.entities) {
      for (const e of data.entities) {
        if (e.roles?.includes('registrar')) {
          registrar = e.vcardArray?.[1]?.find(v => v[0] === 'fn')?.[3] || registrar;
        }
      }
    }
    out += `<p><strong>Registrar:</strong> ${registrar}</p>`;
    if (data.events) {
      for (const ev of data.events) {
        if (ev.eventAction && ev.eventDate) {
          out += `<p><strong>${ev.eventAction}:</strong> ${ev.eventDate}</p>`;
        }
      }
    }
    if (data.network) {
      out += `<p><strong>Network:</strong> ${data.network.name || 'N/A'} (${data.network.handle || ''})</p>`;
      out += `<p><strong>Range:</strong> ${data.network.startAddress} - ${data.network.endAddress}</p>`;
    }
    return out;
  }

  function detectIP(input) {
    const ipv4 = /^(\d{1,3}\.){3}\d{1,3}$/;
    const ipv6 = /^(([a-fA-F0-9]{0,4}:){2,7}[a-fA-F0-9]{1,4})$/;
    return ipv4.test(input) || ipv6.test(input);
  }

  async function main(query) {
    output.innerHTML = `<p class="loading">⏳ Fetching data for <strong>${query}</strong>...</p>`;
    exportButtons.style.display = 'none';

    const rdapData = await fetchRDAP(query);
    let dnsRecords = detectIP(query) ? null : await fetchDNSRecords(query);

    let ip = detectIP(query) ? query : dnsRecords?.A?.[0] || dnsRecords?.AAAA?.[0];
    const ipInfo = ip ? await fetchIPInfo(ip) : null;

    let html = renderSection('WHOIS / RDAP Info', renderRDAP(rdapData));
    if (dnsRecords) html += renderSection('DNS Records', renderTable(dnsRecords));
    if (ipInfo && !ipInfo.error) {
      const info = {
        IP: ipInfo.query,
        Country: ipInfo.country,
        Region: ipInfo.regionName,
        City: ipInfo.city,
        ZIP: ipInfo.zip,
        ISP: ipInfo.isp,
        Organization: ipInfo.org,
        ASN: ipInfo.as
      };
      html += renderSection('Server / IP Hosting Info', renderTable(info));
    }

    lastHTML = html;
    output.innerHTML = html;
    exportButtons.style.display = 'block';
  }

  function exportToCSV() {
    const temp = document.createElement('div');
    temp.innerHTML = lastHTML;
    const rows = temp.querySelectorAll('table tr');
    const csv = [...rows].map(row => {
      const cells = row.querySelectorAll('th, td');
      return [...cells].map(cell => `"${cell.innerText.replace(/"/g, '""')}"`).join(',');
    }).join('\n');

    const blob = new Blob([csv], { type: 'text/csv' });
    const link = document.createElement('a');
    link.href = URL.createObjectURL(blob);
    link.download = 'lookup_result.csv';
    link.click();
  }

  async function exportToPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    doc.html(document.getElementById('output'), {
      callback: function (doc) {
        doc.save('lookup_result.pdf');
      },
      x: 10,
      y: 10,
      width: 180
    });
  }

  form.addEventListener('submit', e => {
    e.preventDefault();
    const val = input.value.trim();
    if (val) main(val);
  });
</script>
</body>
</html>
