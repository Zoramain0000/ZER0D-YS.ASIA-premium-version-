<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>NFC Finder</title>
  <style>
    body {
      font-family: monospace;
    background-image: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSFVOZ2CsKQIPT0Lk06f5bNALaBIuEhMWppBg&s');
      color: #ff0000;
      padding: 20px;
      text-align: center;
    }
    h1 {
      color: #ff0000;
      margin-bottom: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 0 auto 20px;
      background: #0000003b;
      color: #ff0000;
      border: 1px solid #ff0000;
    }
    th, td {
      padding: 10px;
      border-bottom: 1px solid #ff0000;
      text-align: left;
    }
    th {
      background: #00000065;
      position: sticky;
      top: 0;
      z-index: 2;
    }
    tbody {
      display: block;
      max-height: 350px;
      overflow-y: auto;
    }
    thead, tbody tr {
      display: table;
      width: 100%;
      table-layout: fixed;
    }
    button {
      padding: 10px 20px;
      margin: 10px 5px;
      background: #ff0000;
      color: #00ff15;
      border: none;
      cursor: pointer;
      border-radius: 5px;
      font-weight: bold;
    }
    button:hover {
      background: #0000005d;
    }
  </style>
</head>
<body>

  <h1>NFC Finder - Infinite Log Generator</h1>
  <div>
    <button onclick="generateLog()">Generate One</button>
    <button onclick="generateMultiple(100)">Generate 100</button>
    <button onclick="startAuto()">Start Auto</button>
    <button onclick="stopAuto()">Stop Auto</button>
    <button onclick="downloadLog()">Download Log</button>
  </div>
  <table>
    <thead>
      <tr>
        <th>Time</th>
        <th>UID</th>
        <th>Tag Type</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody id="logTableBody"></tbody>
  </table>

  <script>
    const logTableBody = document.getElementById("logTableBody");
    const logEntries = [];
    let autoInterval = null;

    function getTime() {
      return new Date().toLocaleTimeString();
    }

    function getRandomUID(length = 7) {
      return [...Array(length)].map(() => Math.floor(Math.random() * 256).toString(16).padStart(2, '0')).join(":").toUpperCase();
    }

    function getRandomTagType() {
      const types = ["MIFARE Classic", "NTAG213", "NTAG215", "NTAG216", "Ultralight", "Topaz", "ISO14443-A", "ISO15693", "Felica"];
      return types[Math.floor(Math.random() * types.length)];
    }

    function getRandomAction(uid, type) {
      const apdu = ["00A4040007A0000002471001", "00B0950000", "90CA9F", "90A40400"];
      const ndefPayload = [
        "NDEF URI: https://example.com",
        "NDEF Text: Hello, NFC!",
        "NDEF Contact: FN:John Doe, TEL:+123456789",
        "NDEF MIME: image/png;base64,..."
      ];
      const blocks = ["0x04", "0x08", "0x10", "0x20"];
      const actions = [
        `Detected`,
        `Authenticated block ${blocks[Math.floor(Math.random() * blocks.length)]}`,
        `Read block ${blocks[Math.floor(Math.random() * blocks.length)]}`,
        `Wrote block ${blocks[Math.floor(Math.random() * blocks.length)]}`,
        `NDEF: ${ndefPayload[Math.floor(Math.random() * ndefPayload.length)]}`,
        `APDU: ${apdu[Math.floor(Math.random() * apdu.length)]}`,
        `CRC check passed`,
        `Error: timeout`,
        `Disconnected`
      ];
      return actions[Math.floor(Math.random() * actions.length)];
    }

    function addLogLine(time, uid, type, action) {
      const row = `<tr>
        <td>${time}</td>
        <td>${uid}</td>
        <td>${type}</td>
        <td>${action}</td>
      </tr>`;
      logTableBody.innerHTML += row;
      logEntries.push(`[${time}] ${uid} | ${type} | ${action}`);
      logTableBody.scrollTop = logTableBody.scrollHeight;
    }

    function generateLog() {
      const uid = getRandomUID();
      const type = getRandomTagType();
      const time = getTime();
      const action = getRandomAction(uid, type);
      addLogLine(time, uid, type, action);
    }

    function generateMultiple(n) {
      for (let i = 0; i < n; i++) {
        generateLog();
      }
    }

    function startAuto() {
      if (!autoInterval) {
        autoInterval = setInterval(generateLog, 200);
      }
    }

    function stopAuto() {
      clearInterval(autoInterval);
      autoInterval = null;
    }

    function downloadLog() {
      const blob = new Blob([logEntries.join("\n")], { type: "text/plain" });
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = "nfc_finder_log.txt";
      a.click();
    }
  </script>
</body>
</html>
