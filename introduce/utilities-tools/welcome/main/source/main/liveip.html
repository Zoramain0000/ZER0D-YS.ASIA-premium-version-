<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>IP Address Intelligence Finder</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
  --bg:#0b1220;
  --panel:#111827cc;
  --border:#1f2937;
  --accent:#c58b00;
  --text:#e5e7eb;
  --muted:#9ca3af;
}

* { box-sizing:border-box; font-family:system-ui }

body {
  margin:0;
  background:var(--bg);
  color:var(--text);
  overflow-x:hidden;
}

video.bg-video {
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  opacity:.35;
  z-index:-2;
}

.overlay {
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.65);
  z-index:-1;
}

.container {
  max-width:1000px;
  margin:auto;
  padding:30px;
}

h1 {
  text-align:center;
  color:var(--accent);
}

.subtitle {
  text-align:center;
  color:var(--muted);
  margin-bottom:16px;
}

input, button {
  padding:12px;
  background:var(--panel);
  border:1px solid var(--border);
  color:var(--text);
  border-radius:8px;
}

button {
  background:var(--accent);
  color:#000;
  font-weight:700;
  cursor:pointer;
}

button:hover { opacity:.9 }

.search-box {
  display:grid;
  grid-template-columns:1fr 140px;
  gap:10px;
  margin-bottom:15px;
}

.controls {
  display:flex;
  gap:10px;
  justify-content:center;
  flex-wrap:wrap;
  margin-bottom:15px;
}

.results {
  display:grid;
  gap:14px;
}

.card {
  background:var(--panel);
  border:1px solid var(--border);
  padding:14px;
  border-radius:12px;
  animation:fade .3s ease;
}

@keyframes fade {
  from { opacity:0; transform:translateY(6px) }
  to { opacity:1; transform:none }
}

.ip {
  font-size:18px;
  font-weight:700;
  color:#ffd27a;
}

.badge {
  display:inline-block;
  padding:4px 8px;
  border-radius:6px;
  font-size:12px;
  margin-right:6px;
  background:#1f2937;
}

.good { background:#14532d; color:#9affc2 }
.warn { background:#4b3b00; color:#ffd27a }
.bad  { background:#4c1d1d; color:#ff9a9a }

.row {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
  gap:8px;
  margin-top:8px;
  font-size:14px;
}

mark {
  background:#ffd27a;
  color:#000;
  font-weight:700;
}

.footer {
  text-align:center;
  font-size:12px;
  color:var(--muted);
  margin-top:20px;
}
</style>
</head>

<body>

<video class="bg-video" autoplay muted loop>
  <source src="background/1761817527453041720p.mp4" type="video/mp4">
</video>
<div class="overlay"></div>

<audio id="bgMusic" loop>
  <source src="background/Programming___Coding___Hacking_music_vol.18__ANONYMOUS_HEADQUARTERS_(48k).Mp3">
</audio>

<div class="container">
  <h1>üåê IP Address Intelligence Finder</h1>
  <p class="subtitle">Public IP metadata ‚Ä¢ ASN ‚Ä¢ ISP ‚Ä¢ Reachability status ‚Ä¢ No backend</p>

  <div class="search-box">
    <input id="ipInput" placeholder="Enter IPs (comma or space separated)">
    <button onclick="runSearch()">Scan</button>
  </div>

  <div class="controls">
    <button onclick="toggleMusic()">üéµ Music</button>
    <button onclick="showHistory()">üìú History</button>
    <button onclick="clearHistory()">üóë Clear</button>
  </div>

  <div id="results" class="results"></div>

  <div class="footer">
    Uses public IP intelligence APIs ¬∑ No scanning ¬∑ Frontend only
  </div>
</div>

<script>
const music = document.getElementById("bgMusic");

function toggleMusic(){
  music.paused ? music.play() : music.pause();
}

function highlight(text, q) {
  if(!q) return text;
  return text.replace(new RegExp(q,"gi"), m => `<mark>${m}</mark>`);
}

function saveHistory(items){
  let h = JSON.parse(localStorage.getItem("ip_history") || "[]");
  items.forEach(i => { if(!h.includes(i)) h.push(i); });
  localStorage.setItem("ip_history", JSON.stringify(h.slice(-30)));
}

function showHistory(){
  const h = JSON.parse(localStorage.getItem("ip_history") || "[]");
  if(!h.length) return alert("No saved IPs.");
  const pick = prompt("Saved IPs:\n" + h.join("\n") + "\n\nEnter IP:");
  if(pick) document.getElementById("ipInput").value = pick;
}

function clearHistory(){
  localStorage.removeItem("ip_history");
  alert("History cleared");
}

function isPrivate(ip){
  return (
    ip.startsWith("10.") ||
    ip.startsWith("192.168.") ||
    ip.startsWith("172.16.") ||
    ip.startsWith("172.17.") ||
    ip.startsWith("172.18.") ||
    ip.startsWith("172.19.") ||
    ip.startsWith("172.2") ||
    ip.startsWith("127.")
  );
}

async function fetchIPInfo(ip){
  const res = await fetch(`https://ipapi.co/${ip}/json/`);
  return await res.json();
}

let allResults = [];
let visible = 0;

async function runSearch(){
  const input = document.getElementById("ipInput").value.trim();
  if(!input) return alert("Enter at least one IP address.");

  const ips = input.split(/[\s,]+/).filter(Boolean);
  saveHistory(ips);

  document.getElementById("results").innerHTML = "";
  allResults = [];
  visible = 0;

  for(const ip of ips){
    try {
      const data = await fetchIPInfo(ip);
      allResults.push({ ip, data });
    } catch(e){}
  }

  renderNext();
}

function renderNext(){
  const batch = 5;
  const slice = allResults.slice(visible, visible + batch);
  visible += batch;

  const box = document.getElementById("results");

  for(const item of slice){
    const d = item.data;
    const ip = item.ip;

    let statusBadge = `<span class="badge warn">Unknown</span>`;
    if(d.error) statusBadge = `<span class="badge bad">Invalid</span>`;
    else if(isPrivate(ip)) statusBadge = `<span class="badge warn">Private</span>`;
    else statusBadge = `<span class="badge good">Public</span>`;

    const div = document.createElement("div");
    div.className = "card";

    div.innerHTML = `
      <div class="ip">${ip}</div>
      ${statusBadge}

      <div class="row">
        <div><b>Country:</b> ${d.country_name || "-"}</div>
        <div><b>Region:</b> ${d.region || "-"}</div>
        <div><b>City:</b> ${d.city || "-"}</div>
        <div><b>ISP:</b> ${d.org || "-"}</div>
        <div><b>ASN:</b> ${d.asn || "-"}</div>
        <div><b>Timezone:</b> ${d.timezone || "-"}</div>
        <div><b>Type:</b> ${d.version || "N/A"}</div>
      </div>
    `;

    box.appendChild(div);
  }
}

// infinite scroll
window.addEventListener("scroll", () => {
  if (window.innerHeight + window.scrollY > document.body.offsetHeight - 200) {
    renderNext();
  }
});

// shortcuts
document.addEventListener("keydown", e => {
  if (e.ctrlKey && e.key === "Enter") runSearch();
  if (e.ctrlKey && e.key === "m") toggleMusic();
});
</script>
</body>
</html>
