<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cyber GeoIP Lookup</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>

<style>
:root{
  --gold:#cfae55;
  --gold-soft:#ffdc7a;
  --bg:#0a0a0a;
  --border:rgba(207,174,85,.45);
}

*{margin:0;padding:0;box-sizing:border-box}

body{
  font-family:Segoe UI,system-ui;
  background:var(--bg);
  color:var(--gold);
  overflow-x:hidden;
}

/* Background video */
video.bg{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  filter:brightness(.35);
  z-index:-2;
}

/* NAV */
nav{
  position:fixed;
  top:0;
  width:100%;
  height:64px;
  padding:0 24px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:rgba(0,0,0,.75);
  backdrop-filter:blur(12px);
  border-bottom:1px solid var(--border);
  z-index:20;
}

.brand{
  font-size:1.4rem;
  font-weight:700;
}

button{
  background:transparent;
  color:var(--gold);
  border:1px solid var(--gold);
  padding:10px 18px;
  border-radius:10px;
  cursor:pointer;
  transition:.25s;
}

button:hover{
  background:var(--gold);
  color:black;
}

/* MAIN */
.main{
  padding:100px 30px 40px;
  max-width:1200px;
  margin:auto;
}

/* SECTION */
.section{
  background:linear-gradient(180deg,#151515,#0a0a0a);
  border:1px solid var(--border);
  border-radius:18px;
  padding:26px;
  box-shadow:0 0 25px rgba(0,0,0,.6);
  margin-bottom:30px;
}

.section h2{
  color:var(--gold-soft);
  margin-bottom:18px;
}

/* INPUT */
input{
  width:100%;
  padding:14px;
  background:#111;
  border:1px solid var(--border);
  border-radius:12px;
  color:white;
  font-size:15px;
  margin-bottom:12px;
}

/* INFO BOX */
.info{
  background:rgba(0,0,0,.5);
  border:1px solid var(--border);
  border-radius:12px;
  padding:16px;
  line-height:1.7;
}

/* OUTPUT */
pre{
  background:#000;
  border-radius:14px;
  padding:16px;
  max-height:420px;
  overflow:auto;
  font-size:.9rem;
  color:#7CFF9E;
  border:1px solid var(--border);
  white-space:pre-wrap;
}

/* MAP */
#map{
  height:420px;
  border-radius:14px;
  border:1px solid var(--border);
}

/* FOOTER */
footer{
  text-align:center;
  padding:25px;
  opacity:.7;
}
</style>
</head>

<body>

<video class="bg" autoplay muted loop playsinline>
  <source src="background/1761817527453041720p.mp4" type="video/mp4">
</video>

<nav>
  <div class="brand">Cyber GeoIP Lookup</div>
  <button onclick="location.reload()">Reload</button>
</nav>

<div class="main">

  <!-- GEOIP TOOL -->
  <div class="section">
    <h2>üåê Advanced GeoIP Lookup (Real API)</h2>

    <button onclick="detectMyIP()">Detect My IP</button>
    <input id="ipInput" placeholder="Enter IPv4 or IPv6 address">
    <button onclick="lookupIP()">Lookup GeoIP</button>

    <div class="info" id="infoBox">
      Waiting for lookup...
    </div>

    <pre id="rawOutput"></pre>
  </div>

  <!-- MAP -->
  <div class="section">
    <h2>üó∫Ô∏è Geolocation Map</h2>
    <div id="map"></div>
  </div>

</div>

<footer>
¬© 2025 Cyber Tools Toolkit ‚Äî Frontend Only ¬∑ API Powered
</footer>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
let map = L.map("map").setView([20, 0], 2);
let marker;

L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
  attribution: "¬© OpenStreetMap contributors"
}).addTo(map);

/* Detect user's IP */
async function detectMyIP() {
  const res = await fetch("https://api.ipify.org?format=json");
  const data = await res.json();
  document.getElementById("ipInput").value = data.ip;
  lookupIP();
}

/* GEOIP lookup */
async function lookupIP() {
  const ip = document.getElementById("ipInput").value.trim();
  if (!ip) return;

  const infoBox = document.getElementById("infoBox");
  const raw = document.getElementById("rawOutput");

  infoBox.innerHTML = "Looking up GeoIP information...";
  raw.textContent = "";

  try {
    const res = await fetch(`https://ipapi.co/${ip}/json/`);
    const data = await res.json();

    raw.textContent = JSON.stringify(data, null, 2);

    infoBox.innerHTML = `
      <b>IP Address:</b> ${data.ip || "N/A"}<br>
      <b>Country:</b> ${data.country_name || "N/A"} (${data.country || ""})<br>
      <b>Region:</b> ${data.region || "N/A"}<br>
      <b>City:</b> ${data.city || "N/A"}<br>
      <b>Latitude:</b> ${data.latitude || "N/A"}<br>
      <b>Longitude:</b> ${data.longitude || "N/A"}<br>
      <b>Timezone:</b> ${data.timezone || "N/A"}<br>
      <b>ASN:</b> ${data.asn || "N/A"}<br>
      <b>Org / ISP:</b> ${data.org || "N/A"}<br>
      <b>Postal:</b> ${data.postal || "N/A"}
    `;

    if (data.latitude && data.longitude) {
      if (marker) map.removeLayer(marker);

      marker = L.marker([data.latitude, data.longitude])
        .addTo(map)
        .bindPopup(`<b>${data.city || "Location"}</b><br>${data.country_name || ""}`)
        .openPopup();

      map.setView([data.latitude, data.longitude], 8);
    }

  } catch (err) {
    infoBox.innerHTML = "<b>Error:</b> Unable to retrieve GeoIP data.";
  }
}
</script>

</body>
</html>