<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Port Scanner</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #000;
      color: #c58b00;
      overflow-x: hidden;
    }
    video#bg-video {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      min-width: 100vw;
      min-height: 100vh;
      object-fit: cover;
      opacity: 0.1;
      z-index: -1;
    }
    audio#bg-music { display: none; }

    .container {
      max-width: 1000px;
      margin: 50px auto;
      background: rgba(0, 0, 0, 0);
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 0 25px rgba(0, 0, 0, 0);
    }

    h1 { color: #c58b00; margin-bottom: 15px; }

    input[type="text"],
    input[type="number"] {
      width: 100%;
      padding: 12px;
      margin-bottom: 10px;
      background: rgba(0, 0, 0, 0);
      color: #c58b00;
      border: 1px solid #c58b00;
      border-radius: 5px;
      font-size: 1rem;
    }

    button {
      background: rgba(0, 0, 0, 0);
      border: 1px solid #c58b00;
      color: #c58b00;
      padding: 10px 15px;
      margin: 5px 5px 15px 0;
      border-radius: 5px;
      cursor: pointer;
      transition: 0.2s ease;
    }

    button:hover {
      background: rgba(0, 0, 0, 0.0);
      color: red;
    }

    .output {
      background: rgba(0,0,0,0);
      padding: 15px;
      border: 1px solid #c58b00;
      height: 300px;
      overflow-y: auto;
      font-family: monospace;
      white-space: pre-wrap;
      color: #c58b00;
    }

    .open-port { color: #00ff00; }
    .closed-port { color: #ff5050; }
    .summary { margin-top: 10px; color: #00ffff; }
    .stats { margin-bottom: 10px; font-size: 0.9rem; }

    @media (max-width: 768px) {
      .container { margin: 20px 10px; padding: 15px; }
      button { width: 100%; margin: 8px 0; }
      .output { height: 250px; }
    }
  </style>
</head>
<body>
  <!-- Background Video -->
  <video id="bg-video" autoplay muted loop playsinline>
    <source src="background/1761817527453041720p.mp4" type="video/mp4">
    Your browser does not support background video.
  </video>

  <!-- Background Music -->
  <audio id="bg-music" autoplay loop>
    <source src="background/Programming___Coding___Hacking_music_vol.18__ANONYMOUS_HEADQUARTERS_(48k).mp3" type="audio/mp3">
    Your browser does not support background music.
  </audio>

  <div class="container">
    <h1>Port Scanner</h1>
    <input type="text" id="target-ip" placeholder="Enter IP address (e.g. 192.168.0.1)">
    <input type="number" id="start-port" placeholder="Start Port (e.g. 1)">
    <input type="number" id="end-port" placeholder="End Port (e.g. 1000)">
    <button onclick="startScan()">Start Scan</button>
    <button onclick="togglePause()"><span id="pause-btn-label">Pause</span></button>
    <button onclick="clearOutput()">Clear</button>
    <button onclick="exportResults()">Export .txt</button>
    <button onclick="filterOpen()">Show Only Open</button>
    <div class="stats" id="stats">Ports Scanned: 0 | Open: 0 | Closed: 0</div>
    <div class="output" id="output-area">Waiting for scan...</div>
    <div class="summary" id="summary"></div>
  </div>

  <script>
    const outputArea = document.getElementById("output-area");
    const summaryArea = document.getElementById("summary");
    const statsArea = document.getElementById("stats");
    const pauseBtnLabel = document.getElementById("pause-btn-label");

    let openPorts = 0, closedPorts = 0, scannedPorts = 0;
    let port = 1, maxPort = 65535, startPort = 1;
    let scanning = false, paused = false;
    let allResults = [];

    function isValidIP(ip) {
      return /^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(\d{1,3}\.){2}(25[0-5]|2[0-4]\d|[01]?\d\d?)$/.test(ip);
    }

    function getCurrentTimestamp() {
      return new Date().toLocaleString();
    }

    function getRandomStatus() {
      return Math.random() < 0.03;
    }

    function printLine(port, isOpen) {
      const line = document.createElement("div");
      const emoji = isOpen ? "ðŸŸ¢" : "ðŸ”´";
      const status = isOpen ? "OPEN" : "CLOSED";
      const time = getCurrentTimestamp();
      line.textContent = `${emoji} Port ${port}: ${status} â€” [${time}]`;
      line.className = isOpen ? "open-port" : "closed-port";
      outputArea.appendChild(line);
      outputArea.scrollTop = outputArea.scrollHeight;
      allResults.push(line.outerHTML);
    }

    function updateStats() {
      statsArea.textContent = `Ports Scanned: ${scannedPorts} | Open: ${openPorts} | Closed: ${closedPorts}`;
    }

    function clearOutput() {
      outputArea.innerHTML = "Waiting for scan...";
      summaryArea.innerHTML = "";
      openPorts = closedPorts = scannedPorts = 0;
      allResults = [];
      scanning = false;
      paused = false;
      pauseBtnLabel.textContent = "Pause";
      updateStats();
    }

    function togglePause() {
      if (!scanning) return;
      paused = !paused;
      pauseBtnLabel.textContent = paused ? "Resume" : "Pause";
    }

    async function startScan() {
      const target = document.getElementById("target-ip").value.trim();
      const start = parseInt(document.getElementById("start-port").value);
      const end = parseInt(document.getElementById("end-port").value);

      if (!isValidIP(target)) return alert("Please enter a valid IPv4 address.");
      if (isNaN(start) || isNaN(end) || start < 1 || end > 65535 || start > end) {
        return alert("Please enter a valid port range (1â€“65535).");
      }

      clearOutput();
      outputArea.innerHTML = `Scanning ${target} from port ${start} to ${end}...\n`;

      startPort = port = start;
      maxPort = end;
      scanning = true;

      async function scanBatch() {
        if (paused || !scanning) return setTimeout(scanBatch, 500);
        const batchSize = 100;
        for (let i = 0; i < batchSize && port <= maxPort; i++, port++) {
          const isOpen = getRandomStatus();
          isOpen ? openPorts++ : closedPorts++;
          scannedPorts++;
          printLine(port, isOpen);
          updateStats();
        }

        if (port <= maxPort) {
          setTimeout(scanBatch, 15);
        } else {
          scanning = false;
          const doneMsg = document.createElement("div");
          doneMsg.innerHTML = `âœ… Scan complete for <strong>${target}</strong><br>Total Open Ports: <strong>${openPorts}</strong>`;
          summaryArea.appendChild(doneMsg);
        }
      }

      scanBatch();
    }

    function exportResults() {
      const blob = new Blob(
        ["Port Scan Results\n\n", allResults.map(html => html.replace(/<\/?[^>]+(>|$)/g, "")).join("\n")],
        { type: "text/plain" }
      );
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = `port_scan_${new Date().getTime()}.txt`;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }

    function filterOpen() {
      const children = outputArea.children;
      for (let i = 0; i < children.length; i++) {
        children[i].style.display = children[i].classList.contains("open-port") ? "block" : "none";
      }
    }
  </script>
</body>
</html>
